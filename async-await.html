<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>callback</title>
  </head>
  <body>
    <script>
      // login     // once login sonra post sonra post olusturma hepsi bir surec ve birbirini takip eder
      // post
      // create post

      //siparis
      //siparis hazirlama sureci
      // teslimat

      // bir surecin bitip diger adimin baslamasi icin bir uyarici verilmesi gerekir bunlari da  //callback, promise , asyc-await yapariz

      console.log("start");

      const serverStatus = false;
      const login = (username, pasword) => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            if (serverStatus){
                resolve({ username: username, email: "info@yunusemrekoca.com" });
            }
            else 
            {
              reject("server is offline")
            }
           
          }, 1000);
        });
      };

      const getpostByUsername = (username) => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve(["post-1", "post-2", "post-3"]);
          }, 2000);
        });
      };

      const getPostDetails = (post) => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve("post details");
          }, 1000);
        });
      };

      //sync
     async function  displayUser() { // await kullanirsan functiona async eklemen lazim
        try {
          const user =  await login("yunusEmre", "12345");
          console.log(user)

          const posts = await getpostByUsername(user.username);
          console.log(posts)

          const details = await getPostDetails(posts[0]);
          console.log(details)
        }
        catch(err){
          console.log(err)
        }  // hata almak icin hata alabilecegimiz yerleri try metodunun icine aliriz daha sonra catch ile yazdiririz.
      
      }
      displayUser();

     
      console.log("end");
    </script>
  </body>
</html>
